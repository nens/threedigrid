# Config file for automatic testing at travis-ci.org
sudo: required

language: python
python:
  - 2.7

services:
  - docker

before_install:
  - docker build -t threedigrid/test . -f Dockerfile_ci

script:
  - docker run --rm threedigrid/test /bin/bash -c "source /usr/local/venvs/py36/bin/activate && pytest --cov=threedigrid"
  - docker run --rm threedigrid/test bash -c 'source /usr/local/venvs/py36/bin/activate && cd /code/docs && sphinx-build -nW -b html -d _build/doctrees . _build/html'

  - docker run --rm threedigrid/test /bin/bash -c "source /usr/local/venvs/py27/bin/activate && pytest --cov=threedigrid"
  - docker run --rm threedigrid/test bash -c 'source /usr/local/venvs/py27/bin/activate && cd /code/docs && sphinx-build -nW -b html -d _build/doctrees . _build/html'
